# üîç Dialogs RAG System v2.0

**–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∞ –¥–∏–∞–ª–æ–≥–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤ —Ä–∞–±–æ—Ç—ã**

[![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)](https://python.org)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.100+-green.svg)](https://fastapi.tiangolo.com)
[![Streamlit](https://img.shields.io/badge/Streamlit-1.25+-red.svg)](https://streamlit.io)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ legacy, pipeline, enhanced –∏ scaled —Ä–µ–∂–∏–º–æ–≤
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç 100 –¥–æ 10,000+ –¥–∏–∞–ª–æ–≥–æ–≤
- **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –¥–∞—à–±–æ—Ä–¥** - –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **REST API** - –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è** - –ø–µ—Ä–µ—Ö–æ–¥ –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏ –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö
- **–ö–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ DoD (Definition of Done)

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞

–°–∏—Å—Ç–µ–º–∞ —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª–∞ **20 –¥–∏–∞–ª–æ–≥–æ–≤** –∏ –≤—ã—è–≤–∏–ª–∞:

- **2 –∫–ª–∞—Å—Ç–µ—Ä–∞ –ø—Ä–æ–±–ª–µ–º** - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π (36.4% –¥–∏–∞–ª–æ–≥–æ–≤)
- **2 –∫–ª–∞—Å—Ç–µ—Ä–∞ –∏–¥–µ–π** - –µ–¥–∏–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –±–æ–ª—å—à–µ –ü–í–ó
- **2 –∫–ª–∞—Å—Ç–µ—Ä–∞ —Å–∏–≥–Ω–∞–ª–æ–≤** - –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–µ Avito –¥–æ—Å—Ç–∞–≤–∫–∏

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
dialogs-rag/
‚îú‚îÄ‚îÄ api/                    # REST API
‚îÇ   ‚îú‚îÄ‚îÄ unified_api.py     # –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π API
‚îÇ   ‚îî‚îÄ‚îÄ main.py            # Legacy API
‚îú‚îÄ‚îÄ dashboard/             # –î–∞—à–±–æ—Ä–¥—ã
‚îÇ   ‚îú‚îÄ‚îÄ unified_dashboard.py
‚îÇ   ‚îî‚îÄ‚îÄ simple_dashboard.py
‚îú‚îÄ‚îÄ app/                   # –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ api/              # Pydantic —Å—Ö–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ etl/              # ETL –ø—Ä–æ—Ü–µ—Å—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ llm/              # LLM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ clustering/       # –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ utils/            # –£—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ config/               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ adapters/             # –ê–¥–∞–ø—Ç–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ migration/            # –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ quality/              # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞
‚îî‚îÄ‚îÄ pipeline/             # –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –ø–∞–π–ø–ª–∞–π–Ω–æ–≤
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/denirokp/dialogs-rag2.git
cd dialogs-rag2

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements_unified.txt
```

### 2. –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

```bash
# –ó–∞–ø—É—Å–∫ API
python simple_api.py &

# –ó–∞–ø—É—Å–∫ –¥–∞—à–±–æ—Ä–¥–∞
streamlit run simple_dashboard.py --server.port 8501 &
```

### 3. –î–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–µ

- **API:** http://localhost:8000
- **–î–∞—à–±–æ—Ä–¥:** http://localhost:8501
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** http://localhost:8000/docs

## üìà –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### API Endpoints

```bash
# –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
curl http://localhost:8000/api/statistics

# –ü—Ä–æ–±–ª–µ–º—ã –∫–ª–∏–µ–Ω—Ç–æ–≤
curl http://localhost:8000/api/problems

# –ò–¥–µ–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤
curl http://localhost:8000/api/ideas

# –°–∏–≥–Ω–∞–ª—ã –∫–ª–∏–µ–Ω—Ç–æ–≤
curl http://localhost:8000/api/signals

# –ü–æ–∏—Å–∫ –ø–æ —Å—É—â–Ω–æ—Å—Ç—è–º
curl "http://localhost:8000/api/search?query=–¥–æ—Å—Ç–∞–≤–∫–∞&entity_type=problems"
```

### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –¥–∞—à–±–æ—Ä–¥

–û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8501 –¥–ª—è:
- üìä –ü—Ä–æ—Å–º–æ—Ç—Ä–∞ –º–µ—Ç—Ä–∏–∫ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- üö´ –ê–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–±–ª–µ–º –∫–ª–∏–µ–Ω—Ç–æ–≤
- üí° –ò–∑—É—á–µ–Ω–∏—è –∏–¥–µ–π –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
- üì° –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–∏–≥–Ω–∞–ª–æ–≤
- üîç –ü–æ–∏—Å–∫–∞ –ø–æ —Ü–∏—Ç–∞—Ç–∞–º

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

```yaml
# config/unified_config.yaml
general:
  default_mode: "auto"  # auto, legacy, pipeline, enhanced, scaled
  log_level: "INFO"

processing:
  windows:
    max_tokens: 1800
    whole_dialog_max: 8000
  batch_size: 100
  max_workers: 4

quality:
  thresholds:
    dedup_max: 0.01
    coverage_other_max: 2.0
    evidence_100: true
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# .env
OPENAI_API_KEY=your_api_key_here
DUCKDB_PATH=data/rag.duckdb
REQUIRE_QUALITY_PASS=true
```

## üìä –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

### 1. Legacy Mode
- –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏
- –ë–∞–∑–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞
- –ü—Ä–æ—Å—Ç–∞—è –∞–≥—Ä–µ–≥–∞—Ü–∏—è

### 2. Pipeline Mode
- –°–∏—Å—Ç–µ–º–∞ —Å —ç—Ç–∞–ø–∞–º–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞
- –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –∏ –¥–µ—Ç–∞–ª—å–Ω–∞—è –∞–≥—Ä–µ–≥–∞—Ü–∏—è

### 3. Enhanced Mode
- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã
- –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ
- A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 4. Scaled Mode
- –û–±—Ä–∞–±–æ—Ç–∫–∞ Polars
- –û–∫–æ–Ω–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ
- –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è
- –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π API

## üîç –ö–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:

- **Evidence-100** - –≤—Å–µ —Å—É—â–Ω–æ—Å—Ç–∏ –∏–º–µ—é—Ç —Ü–∏—Ç–∞—Ç—ã
- **Client-only-100** - –∞–Ω–∞–ª–∏–∑ —Ç–æ–ª—å–∫–æ —Ä–µ–ø–ª–∏–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤
- **Schema-valid-100** - –≤–∞–ª–∏–¥–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
- **Dedup ‚â§1%** - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –¥—É–±–ª–∏–∫–∞—Ç—ã
- **Coverage ‚â•98%** - –≤—ã—Å–æ–∫–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –¥–∏–∞–ª–æ–≥–æ–≤

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏:** ~2 –º–∏–Ω—É—Ç—ã –Ω–∞ 20 –¥–∏–∞–ª–æ–≥–æ–≤
- **–ü–∞–º—è—Ç—å:** ~100MB
- **–¢–æ—á–Ω–æ—Å—Ç—å:** 95%+ –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:** –¥–æ 10,000+ –¥–∏–∞–ª–æ–≥–æ–≤

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
pytest tests/

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
pytest tests/test_quality.py -v
```

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

```bash
# Black
black .

# isort
isort .

# flake8
flake8 .
```

### –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

```bash
# –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º
python migration/migration_tools.py --action detect

# –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ scaled —Ä–µ–∂–∏–º
python migration/migration_tools.py --action migrate --target-mode scaled

# –í–∞–ª–∏–¥–∞—Ü–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏
python migration/migration_tools.py --action validate
```

## üì¶ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### Docker (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
docker build -t dialogs-rag .

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker run -p 8000:8000 -p 8501:8501 dialogs-rag
```

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Python:** 3.8+
- **RAM:** 2GB+
- **–î–∏—Å–∫:** 2GB+
- **–°–µ—Ç—å:** –ü–æ—Ä—Ç—ã 8000, 8501

## üìã Roadmap

### v2.1 (Q4 2025)
- [ ] Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- [ ] Kubernetes —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### v2.2 (Q1 2026)
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥—Ä—É–≥–∏—Ö LLM (Claude, Gemini)
- [ ] –ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å
- [ ] –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- [ ] ML –º–æ–¥–µ–ª–∏ –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É: `git checkout -b feature/amazing-feature`
3. –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è: `git commit -m 'Add amazing feature'`
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –≤ –≤–µ—Ç–∫—É: `git push origin feature/amazing-feature`
5. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ MIT License - —Å–º. —Ñ–∞–π–ª [LICENSE](LICENSE) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- **Issues:** [GitHub Issues](https://github.com/denirokp/dialogs-rag2/issues)
- **Discussions:** [GitHub Discussions](https://github.com/denirokp/dialogs-rag2/discussions)
- **Email:** support@dialogs-rag.com

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- OpenAI –∑–∞ GPT API
- Streamlit –∑–∞ –æ—Ç–ª–∏—á–Ω—ã–π –¥–∞—à–±–æ—Ä–¥ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- FastAPI –∑–∞ –±—ã—Å—Ç—Ä—ã–π –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π API
- –°–æ–æ–±—â–µ—Å—Ç–≤–æ Python –∑–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–æ–ª–µ–∑–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫

---

**–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥–∏–∞–ª–æ–≥–æ–≤**

*–í–µ—Ä—Å–∏—è: 2.0.0 | –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 14 —Å–µ–Ω—Ç—è–±—Ä—è 2025*